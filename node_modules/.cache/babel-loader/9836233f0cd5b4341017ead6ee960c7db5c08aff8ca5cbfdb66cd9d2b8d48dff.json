{"ast":null,"code":"import _slicedToArray from\"E:/project1/main/final/fitnessfront/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{Link,useNavigate,useParams}from\"react-router-dom\";import axiosInstance from\"../../baseurl\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function Chat(){var _useParams=useParams(),id=_useParams.id;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),msg=_useState2[0],setmsg=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),chat=_useState4[0],setchat=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),updatestate=_useState6[0],setupstate=_useState6[1];var Navigate=useNavigate();useEffect(function(){if(localStorage.getItem(\"CustomerLogId\")==null){Navigate(\"/home\");}},[]);useEffect(function(){axiosInstance.post(\"/viewChatForDrwithCust\",{cid:localStorage.getItem(\"CustomerLogId\"),drid:id}).then(function(res){console.log(res,\"view chat\");if(res.data.data!=undefined){setchat(res.data.data);}}).catch(function(err){console.log(err);});},[updatestate]);var submitfn=function submitfn(e){setupstate(function(prevState){return!prevState;});e.preventDefault();axiosInstance.post(\"/createChat\",{cid:localStorage.getItem(\"CustomerLogId\"),drid:id,tid:null,msg:msg,from:\"customer\"}).then(function(res){console.log(res);setmsg(\"\");}).catch(function(err){console.log(err);});};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"chatdiv\",style:{minHeight:\"400px\",padding:\"150px\",width:\"100%\",margin:\"auto\"},children:[/*#__PURE__*/_jsxs(Link,{className:\"btn btn-primary\",to:\"/cusprofile/createChatDoctor\",children:[\" \",\"Back\"]}),/*#__PURE__*/_jsx(\"div\",{style:{border:\"2px solid black\",borderRadius:\"10px\",// minHeight: \"300px\",\npadding:\"50px\",margin:\"10px\",height:\"300px\",overflowY:\"scroll\"},children:chat.length?chat.map(function(a){var x;if(a.from==\"customer\"){x=a.cid.name;}else{x=a.drid.name;}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{children:[\" \",/*#__PURE__*/_jsxs(\"b\",{children:[\" \",x,\": \"]}),\" \",a.msg]})});}):/*#__PURE__*/_jsx(\"p\",{children:\"Doctor: Hi. How can i help you?\"})}),/*#__PURE__*/_jsx(\"form\",{onSubmit:submitfn,children:/*#__PURE__*/_jsxs(\"div\",{class:\"input-group mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",class:\"form-control\",\"aria-describedby\":\"basic-addon2\",value:msg,onChange:function onChange(e){setmsg(e.target.value);}}),/*#__PURE__*/_jsx(\"span\",{class:\"input-group-text\",id:\"basic-addon2\",children:/*#__PURE__*/_jsx(\"button\",{children:\" Send\"})})]})})]})});}export default Chat;","map":{"version":3,"names":["React","useEffect","useState","Link","useNavigate","useParams","axiosInstance","Chat","id","msg","setmsg","chat","setchat","updatestate","setupstate","Navigate","localStorage","getItem","post","cid","drid","then","res","console","log","data","undefined","catch","err","submitfn","e","prevState","preventDefault","tid","from","minHeight","padding","width","margin","border","borderRadius","height","overflowY","length","map","a","x","name","target","value"],"sources":["E:/project1/main/final/fitnessfront/src/Components/Profile/Chat.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Link, useNavigate, useParams } from \"react-router-dom\";\r\nimport axiosInstance from \"../../baseurl\";\r\n\r\nfunction Chat() {\r\n  const { id } = useParams();\r\n  const [msg, setmsg] = useState(\"\");\r\n  const [chat, setchat] = useState([]);\r\n  const [updatestate, setupstate] = useState(false);\r\n  \r\n  const Navigate = useNavigate();\r\n  useEffect(() => {\r\n    if (localStorage.getItem(`CustomerLogId`) == null) {\r\n      Navigate(`/home`);\r\n    }\r\n  },[]);\r\n\r\n  useEffect(() => {\r\n    axiosInstance\r\n      .post(`/viewChatForDrwithCust`, {\r\n        cid: localStorage.getItem(\"CustomerLogId\"),\r\n        drid: id,\r\n      })\r\n      .then((res) => {\r\n        console.log(res, \"view chat\");\r\n\r\n        if (res.data.data != undefined) {\r\n          setchat(res.data.data);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }, [updatestate]);\r\n\r\n  const submitfn = (e) => {\r\n    setupstate((prevState) => !prevState);\r\n    e.preventDefault();\r\n    axiosInstance\r\n      .post(`/createChat`, {\r\n        cid: localStorage.getItem(\"CustomerLogId\"),\r\n        drid: id,\r\n        tid:null,\r\n        msg: msg,\r\n        from: \"customer\",\r\n      })\r\n      .then((res) => {\r\n        console.log(res);\r\n        setmsg(\"\");\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"chatdiv\"\r\n        style={{\r\n          minHeight: \"400px\",\r\n          padding: \"150px\",\r\n          width: \"100%\",\r\n          margin: \"auto\",\r\n         \r\n        }}\r\n      >\r\n        <Link className=\"btn btn-primary\" to={`/cusprofile/createChatDoctor`}>\r\n          {\" \"}\r\n          Back\r\n        </Link>\r\n\r\n        <div\r\n          style={{\r\n            border: \"2px solid black\",\r\n            borderRadius: \"10px\",\r\n            // minHeight: \"300px\",\r\n            padding: \"50px\",\r\n            margin: \"10px\",\r\n            height: \"300px\",\r\n            overflowY: \"scroll\",\r\n           \r\n          }}\r\n        >\r\n          {chat.length ? (\r\n            chat.map((a) => {\r\n              let x;\r\n              if (a.from == \"customer\") {\r\n                x = a.cid.name;\r\n              } else {\r\n                x = a.drid.name;\r\n              }\r\n              return (\r\n                <div>\r\n                  <p>\r\n                    {\" \"}\r\n                    <b> {x}: </b> {a.msg}\r\n                  </p>\r\n                </div>\r\n              );\r\n            })\r\n          ) : (\r\n            <p>Doctor: Hi. How can i help you?</p>\r\n          )}\r\n        </div>\r\n        <form onSubmit={submitfn}>\r\n          <div class=\"input-group mb-3\">\r\n            <input\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              aria-describedby=\"basic-addon2\"\r\n              value={msg}\r\n              onChange={(e) => {\r\n                setmsg(e.target.value);\r\n              }}\r\n            />\r\n            <span class=\"input-group-text\" id=\"basic-addon2\">\r\n              <button> Send</button>\r\n            </span>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Chat;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}