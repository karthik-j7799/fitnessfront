{"ast":null,"code":"import _slicedToArray from\"E:/project1/main/final/fitnessfront/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import axiosInstance from\"../../baseurl\";import{Link,useNavigate}from\"react-router-dom\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function ViewDocChat(_ref){var chatid=_ref.chatid;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),chat=_useState2[0],setchat=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),msg=_useState4[0],setmsg=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),updatestate=_useState6[0],setupstate=_useState6[1];var navigate=useNavigate();useEffect(function(){if(localStorage.getItem(\"Doctorlogid\")==null){navigate(\"/home\");}},[]);useEffect(function(){axiosInstance.post(\"/viewChatForDrwithCust\",{cid:chatid,drid:localStorage.getItem(\"Doctorlogid\")}).then(function(res){console.log(res,\"all chat with customer by id\");if(res.data.data!=undefined){setchat(res.data.data);}}).catch(function(err){console.log(err);});},[updatestate,chatid]);var submitfn=function submitfn(e){setupstate(function(prevState){return!prevState;});e.preventDefault();axiosInstance.post(\"/createChat\",{cid:chatid,drid:localStorage.getItem(\"Doctorlogid\"),msg:msg,from:\"Doctor\"}).then(function(res){console.log(res);setmsg(\"\");}).catch(function(err){console.log(err);});};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"chatdiv\",style:{minHeight:\"400px\",padding:\"50px\",width:\"100%\",margin:\"auto\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{border:\"2px solid black\",borderRadius:\"10px\",// minHeight: \"300px\",\npadding:\"50px\",margin:\"10px\",height:\"300px\",overflowY:\"scroll\"},children:chat.length?chat.map(function(a){var x;if(a.from==\"customer\"){x=a.cid.name;}else{x=a.drid.name;}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{children:[\" \",/*#__PURE__*/_jsxs(\"b\",{children:[\" \",x,\": \"]}),\" \",a.msg]})});}):/*#__PURE__*/_jsx(\"p\",{children:\"No chat\"})}),/*#__PURE__*/_jsx(\"form\",{onSubmit:submitfn,children:/*#__PURE__*/_jsxs(\"div\",{class:\"input-group mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",class:\"form-control\",\"aria-describedby\":\"basic-addon2\",value:msg,onChange:function onChange(e){setmsg(e.target.value);}}),/*#__PURE__*/_jsx(\"span\",{class:\"input-group-text\",id:\"basic-addon2\",children:/*#__PURE__*/_jsx(\"button\",{children:\" Send\"})})]})})]})});}export default ViewDocChat;","map":{"version":3,"names":["React","useEffect","useState","axiosInstance","Link","useNavigate","ViewDocChat","chatid","chat","setchat","msg","setmsg","updatestate","setupstate","navigate","localStorage","getItem","post","cid","drid","then","res","console","log","data","undefined","catch","err","submitfn","e","prevState","preventDefault","from","minHeight","padding","width","margin","border","borderRadius","height","overflowY","length","map","a","x","name","target","value"],"sources":["E:/project1/main/final/fitnessfront/src/Components/Profile/ViewDocChat.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axiosInstance from \"../../baseurl\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\n\r\nfunction ViewDocChat({ chatid }) {\r\n  const [chat, setchat] = useState([]);\r\n  const [msg, setmsg] = useState(\"\");\r\n  const [updatestate, setupstate] = useState(false);\r\n\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    if (localStorage.getItem(`Doctorlogid`) == null) {\r\n      navigate(\"/home\");\r\n    }\r\n  },[]);\r\n\r\n  useEffect(() => {\r\n    axiosInstance\r\n      .post(`/viewChatForDrwithCust`, {\r\n        cid: chatid,\r\n        drid: localStorage.getItem(\"Doctorlogid\"),\r\n      })\r\n      .then((res) => {\r\n        console.log(res, \"all chat with customer by id\");\r\n        if (res.data.data != undefined) {\r\n          setchat(res.data.data);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }, [updatestate, chatid]);\r\n\r\n  const submitfn = (e) => {\r\n    setupstate((prevState) => !prevState);\r\n    e.preventDefault();\r\n    axiosInstance\r\n      .post(`/createChat`, {\r\n        cid: chatid,\r\n        drid: localStorage.getItem(\"Doctorlogid\"),\r\n        msg: msg,\r\n        from: \"Doctor\",\r\n      })\r\n      .then((res) => {\r\n        console.log(res);\r\n        setmsg(\"\");\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n  return (\r\n    <div>\r\n      <div className=\"chatdiv\"\r\n        style={{\r\n          minHeight: \"400px\",\r\n          padding: \"50px\",\r\n          width: \"100%\",\r\n          margin: \"auto\",\r\n        \r\n        }}\r\n      >\r\n        <div\r\n          style={{\r\n            border: \"2px solid black\",\r\n            borderRadius: \"10px\",\r\n            // minHeight: \"300px\",\r\n            padding: \"50px\",\r\n            margin: \"10px\",\r\n            height: \"300px\",\r\n            overflowY: \"scroll\",\r\n            \r\n          }}\r\n        >\r\n          {chat.length ? (\r\n            chat.map((a) => {\r\n              let x;\r\n              if (a.from == \"customer\") {\r\n                x = a.cid.name;\r\n              } else {\r\n                x = a.drid.name;\r\n              }\r\n              return (\r\n                <div>\r\n                  <p>\r\n                    {\" \"}\r\n                    <b> {x}: </b> {a.msg}\r\n                  </p>\r\n                </div>\r\n              );\r\n            })\r\n          ) : (\r\n            <p>No chat</p>\r\n          )}\r\n        </div>\r\n        <form onSubmit={submitfn}>\r\n          <div class=\"input-group mb-3\">\r\n            <input\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              aria-describedby=\"basic-addon2\"\r\n              value={msg}\r\n              onChange={(e) => {\r\n                setmsg(e.target.value);\r\n              }}\r\n            />\r\n            <span class=\"input-group-text\" id=\"basic-addon2\">\r\n              <button> Send</button>\r\n            </span>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ViewDocChat;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}